!function(e,d){e.PEP=e.PEP||{};var u=e.PEP,i=u.Resources.ResourceId(),s=u.Resources.CourseId(),a=u.Resources.LectureId(),c="codeEditor"+i,o=!1;$resourceNavTabs=null,$btnCompileCode=null,$btnSubmitCode=null,$btnFullScreen=null,$btnDownloadTestCase=null,$compileResultSection=null,$submitResultSection=null;var n=20;function l(){lastActiveTab=this.hash}function r(){d.ajax({url:"/question/solution/"+i,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){if(e){var t=JSON.parse(e);actualSolution=t,u.CodeEditor.Init("solutionEditor",{defaultCode:actualSolution,readOnly:!0,saveInSessionStorage:!1,copyPasteDisabled:!0}),d("#solVideoSection").removeClass("hide")}else u.Component.alert("No solution found for this question"),l()},error:function(e){window.PEP.handleException(e)}})}function m(){if(lastActiveTab=this.hash,!d(this).find("div.editor").html().trim()){var i=d(this).attr("solutionid");window.PEP.showLoader(),d.ajax({url:"/question/submitteSolution/"+i,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){var t=e.testCaseHtml,o=i+"historyEditor";u.CodeEditor.Init(o,{readOnly:!0}),u.CodeEditor.SetContent(o,e.submittedCode),d("#testCasesList"+i).html(t),window.PEP.hideLoader()},error:function(e){window.PEP.handleException(e)}})}}function p(){$submitResultSection.addClass("hide");var e=d("#customInput"),i={},t=u.CodeEditor.GetSelectedLangCode(c),o=u.CodeEditor.GetContent(c);if(!o||!o.trim())return u.Component.alert("Please write code."),!1;if(i={source_code:o,language_id:t,isCustomInput:!1},0<e.val().length)i.isCustomInput=!0,e=e.val(),i.input=e.trim();else{var s=d("#sampleInput").val();i.input=s.trim();var a=d("#sampleOutput").val();i.output=a.trim()}window.PEP.showLoader();var n=u.Resources.ResourceId();d.ajax({url:"/compileCode/"+n,data:i,dataType:"json",method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){var t,o;window.PEP.hideLoader(),t=e.data,o=i.isCustomInput,$compileResultSection.addClass("hide"),$submitResultSection.addClass("hide"),t&&(o?d("#expectedOutput").addClass("hide"):d("#expectedOutput").removeClass("hide"),$ioSection.find("#compileResultSection").removeClass("hide"),$compileResultSection.find("#compile_status").attr("class",t.success?"green-text":"red-text"),$compileResultSection.find("#compile_status")[0].innerText=t.message,$compileResultSection.find("#compile_time")[0].innerText=t.time?",  "+t.time+"sec":"",$compileResultSection.find("#compile_memory")[0].innerText=t.memory?",  "+t.memory+"kb":"",$compileResultSection.find("#compile_actual_output")[0].innerHTML=t.actualOutput,$compileResultSection.find("#compile_expected_output")[0].innerHTML=t.expectedOutput)},error:function(e){window.PEP.handleException(e)}})}function h(){$compileResultSection.addClass("hide"),$submitResultSection.html(""),$submitResultSection.removeClass("hide");var e,t=u.CodeEditor.GetSelectedLangCode(c);e={source_code:u.CodeEditor.GetContent(c),language_id:t,marks:d("#marks").val()};var o,i=u.Resources.ResourceId();o=d("#outputSection"),d("#expectedOutput").addClass("hide"),d(o).addClass("hide"),d(o).find("span#heading").class="",window.PEP.showLoader(),d.ajax({url:"/submitCode/"+i,data:e,dataType:"json",method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){$submitResultSection.html(e.data),window.PEP.hideLoader()},error:function(e){window.PEP.handleException(e)}})}function f(){for(var e=["input","expectedOutput","actualOutput"],t=0;t<e.length;t++){var o=e[t],i=d("#"+o).val(),s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),s.setAttribute("download","testCase_"+o),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}u.ResourceEditorInit=function(){if(!o){$resourceNavTabs=d("#resourceNavTabs"),$ioSection=d("#"+c+"_ioSection");var e=$ioSection.find("#compileCode");d(e).on("click",p);var t=$ioSection.find("#submitCode");d(t).on("click",h),$btnDownloadTestCase=d(".downloadTestCase"),$compileResultSection=$ioSection.find("#compileResultSection"),$submitResultSection=$ioSection.find("#submitResultSection"),d(document).on("click","a[action=downloadTestCase]",f),o=!0}!function(){lastActiveTab=this.hash;var e=$resourceNavTabs.find("li a.active");$resourceNavTabs.find("li").each(function(e){d(this).removeClass("active")}),d(e).parent("li").addClass("active");var t=e.attr("action");switch(d(".showEditorOptions").addClass("hide"),d(e).parent("li").find(".showEditorOptions").removeClass("hide"),t){case"showEditor":!function(){if($sampleCode=d("#codeEditor"+i+"_sample_code"),$sampleCode.val())try{defaultCode=JSON.parse($sampleCode.val())}catch(e){}u.CodeEditor.Init(c,{defaultCode:defaultCode,saveInSessionStorage:!0,copyPasteDisabled:!1})}();break;case"showHistory":window.PEP.showLoader(),d.ajax({url:"/getQuestionHistory/"+i,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){d("div[purpose=questionsHistory]").html(e.data),d("li[action=showSubmittedCode]").each(function(){d(this).on("click",m)}),d(".collapsible").collapsible(),window.PEP.hideLoader()},error:function(e){window.PEP.handleException(e)}});break;case"showSolution":d.ajax({url:"/resourceSeen/"+i,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){e&&e.success&&(e.data?r():u.Component.dialog("your marks will be deducted",{title:"Please Confirm",modalType:"modal-fixed-footer",buttons:{close:{className:"  red white-text",text:"close",modalClose:!0},confirm:{className:" ",text:"confirm",modalClose:!0,callback:function(){r()}}}}))},error:function(e){window.PEP.handleException(e)}});break;case"showStats":!function t(e){var o;0!=e&&(e||(e=1),i?o="/stats/resourceId/"+i+"/pageSize/"+n+"/pageFrom/"+e:s&&a?o="/stats/courseId/"+s+"/lectureId/"+a+"/pageSize/"+n+"/pageFrom/"+e:s&&(o="/stats/courseId/"+s+"/pageSize/"+n+"/pageFrom/"+e),window.PEP.showLoader(),d.ajax({url:o,dataType:"json",method:"Get",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){d("#statsContainer").html(e.data),d("#stat"+e.userId).addClass("teal white-text"),d(".pageLi").on("click",function(){t(d(this).attr("index"))}),d("#showStatsPerpage").on("change",function(){n=this.value,t(1)}),window.PEP.hideLoader()},error:function(e){window.PEP.handleException(e)}}))}(1);break;case"showQuestion":l()}}()}}(window,window.jQuery);